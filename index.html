<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Zoe Atlas üêû</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body, html { margin:0; padding:0; height:100%; font-family:'Arial', sans-serif; }

  /* Header */
  header {
    width:100%;
    padding:15px;
    background: linear-gradient(135deg, #8e44ad, #3498db, #ff6b81, #1abc9c);
    color:white;
    text-align:center;
    box-shadow:0 2px 6px rgba(0,0,0,0.2);
    word-wrap: break-word;
  }
  header h1 { margin:0; font-size:2em; }
  header p { margin:5px 0 0 0; font-size:1em; }

  /* Map */
  #map { width:100%; height:calc(100% - 300px); }

  /* Bottom panel */
  #bottom-panel {
    position:fixed;
    bottom:0;
    left:0;
    width:100%;
    max-height:300px;
    background:#5dade2; /* soft blue */
    color:#fff;
    overflow-y:auto;
    border-top:4px solid #8e44ad;
    padding:10px 15px;
    box-sizing:border-box;
    z-index:1000;
  }
  #bottom-panel h2 { margin:0 0 5px 0; font-size:1.2em; color:#ff6b81; text-align:center; }

  #search-bar { width:100%; padding:6px; border-radius:4px; border:none; margin-bottom:10px; }

  details { margin-bottom:5px; border-radius:4px; background:#aed6f1; padding:5px; border:1px solid #3498db; color:#1b2631; }
  summary { cursor:pointer; font-weight:bold; }
  ul { list-style:none; padding-left:15px; margin:5px 0 0 0; }
  li { padding:4px 6px; margin-bottom:4px; border-radius:4px; background:#d6eaf8; cursor:pointer; transition:0.2s; }
  li:hover { background:#85c1e9; }

  /* Scrollbar for panel */
  #bottom-panel::-webkit-scrollbar { width:8px; }
  #bottom-panel::-webkit-scrollbar-thumb { background:#8e44ad; border-radius:4px; }

  @media (max-width:768px){
    #map { height:calc(100% - 350px); }
  }
</style>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB38rOcYSnjrdPynqMR6i0vpP8ZYi1Z2W4"></script>
<script>
let map;
let markers=[];
const places=[
  // --- Ireland ---
  {country:"Ireland", city:"Dublin", name:"Nine Crows Vintage", position:{lat:53.3437,lng:-6.2646}, description:"Curated Y2K vintage ‚Äì diverse staff, fun vibe.", address:"22 Temple Lane S, Dublin 2, D02 HP52, Ireland", link:"https://www.instagram.com/ninecrowsvintage/"},
  {country:"Ireland", city:"Dublin", name:"Lou's Lot (George's Street Arcade)", position:{lat:53.3425,lng:-6.2634}, description:"Luxury vintage inside the arcade.", address:"South Great George's Street, Dublin 2, Ireland", link:""},
  {country:"Ireland", city:"Dublin", name:"Copper and Straw", position:{lat:53.3461,lng:-6.2638}, description:"Great coffee & friendly staff.", address:"Aston Quay, Temple Bar, Dublin, D02 FV38, Ireland", link:""},
  {country:"Ireland", city:"Dublin", name:"George's Arcade", position:{lat:53.3430,lng:-6.2635}, description:"Open-air market full of character.", address:"South Great George's Street, Dublin 2, Ireland", link:""},
  {country:"Ireland", city:"Dublin", name:"Bambino's", position:{lat:53.3395,lng:-6.2651}, description:"Cozy pizza spot, local favorite.", address:"37 Stephen Street Lower, Dublin 2, D02 T862, Ireland", link:""},
  {country:"Ireland", city:"Dublin", name:"The Big Smoke Vintage Clothing", position:{lat:53.3452,lng:-6.2639}, description:"Vintage treasures by Merchant‚Äôs Arch.", address:"Merchant's Arch, Dublin 2, D02 WP27, Ireland", link:""},

  // --- Spain ---
  {country:"Spain", city:"Madrid", name:"Amazing Coffee", position:{lat:40.4112,lng:-3.7035}, description:"Great vibe, Colombian owner ‚Äì hot spot.", address:"C. de San Mill√°n, 4, Centro, 28012 Madrid, Spain", link:""},
  {country:"Spain", city:"Madrid", name:"Hot Now Pizza", position:{lat:40.4235,lng:-3.6994}, description:"Great pizza spot.", address:"C. de Barbieri, 14, Centro, 28004 Madrid, Spain", link:""},
  {country:"Spain", city:"Madrid", name:"Han So Caf√©", position:{lat:40.4240,lng:-3.7060}, description:"Trendy coffee + caf√© spot in Malasa√±a.", address:"Calle Pez 20, Barrio Malasa√±a, 28004 Madrid, Spain", link:""},
  {country:"Spain", city:"Madrid", name:"San Miguel Market", position:{lat:40.4154,lng:-3.7094}, description:"Big, bustling market ‚Äì must visit.", address:"Plaza de San Miguel, 28005 Madrid, Spain", link:""},
  {country:"Spain", city:"Madrid", name:"Honest Greens", position:{lat:40.4512,lng:-3.6889}, description:"Cheap & healthy food ‚Äì any location works.", address:"Paseo de la Castellana, 89, 28046, Madrid, Spain", link:""},
  {country:"Spain", city:"Madrid", name:"Humana (Thrift Store)", position:{lat:40.4236,lng:-3.6717}, description:"Great deals, some items from ‚Ç¨2, discounts on certain days.", address:"Calle de Alcal√°, 171, 28009 Madrid", link:""},
  {country:"Spain", city:"Madrid", name:"By Pillow Hostel", position:{lat:40.4107,lng:-3.7026}, description:"Great location, friendly staff.", address:"Calle de Jes√∫s y Mar√≠a, 12, 28012 Madrid, Spain", link:""},
  {country:"Spain", city:"Madrid", name:"Ambu Nu√±ez Caf√©", position:{lat:40.4292,lng:-3.6831}, description:"Excellent coffee ‚Äì cold brew is amazing. Two locations.", address:"Calle Nu√±ez de Balboa 28, 28001 Madrid, Spain", link:""},
  {country:"Spain", city:"Madrid", name:"Alma Nomad Bakery", position:{lat:40.4368,lng:-3.7009}, description:"Great bakery ‚Äì two locations, plus pizza shop nearby.", address:"C/ Sta. Feliciana 10, 28010 Madrid, Spain", link:""},
  {country:"Spain", city:"Madrid", name:"Alma Nomad Pizza", position:{lat:40.4365,lng:-3.7015}, description:"Delicious pizza by Alma Nomad Bakery.", address:"C. de Sta. Feliciana, 4, 28010 Madrid, Spain", link:""},

  {country:"Spain", city:"Barcelona", name:"De La Creme", position:{lat:41.3907,lng:2.1594}, description:"Great gelato & friendly staff.", address:"Carrer d'Enric Granados, 15, 08007 Barcelona, Spain", link:""},
  {country:"Spain", city:"Barcelona", name:"Honest Greens", position:{lat:41.3888,lng:2.1590}, description:"Healthy, delicious food at good prices.", address:"Various locations, Barcelona, Spain", link:""},
  {country:"Spain", city:"Barcelona", name:"Hotel Market", position:{lat:41.3787,lng:2.1598}, description:"Excellent location, great staff & accommodations.", address:"Carrer del Comte Borrell, 68, 08015 Barcelona, Spain", link:""},
  {country:"Spain", city:"Barcelona", name:"Papa D√¢m", position:{lat:41.3779,lng:2.1623}, description:"Delicious food ‚Äì try the garlic rice!", address:"Rda. de Sant Pau, 11, 08015 Barcelona, Spain", link:""},
  {country:"Spain", city:"Barcelona", name:"Origo", position:{lat:41.3778,lng:2.1638}, description:"Amazing staff, cardamom bun + coffee spot.", address:"Rda. de Sant Pau, 67, 08015 Barcelona, Spain", link:""},

  // --- Guatemala ---
  {country:"Guatemala", city:"Antigua", name:"Hotel Casa Do√±a Antonia", position:{lat:14.5560,lng:-90.7336}, description:"Gorgeous hotel ‚Äì breakfast amazing, staff so welcoming.", address:"1A Calle Oriente 9A, Casa 9, Alameda Santa Rosa, Antigua, Guatemala", link:""},
  {country:"Guatemala", city:"Antigua", name:"Casa Donya Hotel Antigua", position:{lat:14.5591,lng:-90.7340}, description:"Beautiful venue ‚Äì phenomenal pizza, welcoming staff.", address:"3a Calle Oriente 16a, Antigua Guatemala, Sacatep√©quez", link:""},
  {country:"Guatemala", city:"Antigua", name:"La Tasca", position:{lat:14.5825,lng:-90.6768}, description:"Great vibes ‚Äì get the shrimp tostadas.", address:"2 Avenida, Magdalena Milpas Altas, Sacatep√©quez", link:""},

  {country:"Guatemala", city:"Guatemala City", name:"12 ONZAS", position:{lat:14.6039,lng:-90.4880}, description:"Great coffee & matcha, beautiful space to relax.", address:"Calle 3-57 13, Zona 10, Guatemala City, 01010", link:"https://12onzas.com"},
  {country:"Guatemala", city:"Guatemala City", name:"Oakland Mall", position:{lat:14.6019,lng:-90.5133}, description:"Beautiful mall ‚Äì very welcoming.", address:"Local 115 A, Calle Real de la Villa Guadalupe, 13-01, Zona 10, Guatemala City", link:""},
  {country:"Guatemala", city:"Guatemala City", name:"Mega Paca (Thrift Store)", position:{lat:14.6291,lng:-90.5174}, description:"Huge thrift store, great deals, welcoming staff.", address:"19 Avenida 10-63, Guatemala, 01011", link:""},
  {country:"Guatemala", city:"Guatemala City", name:"Smart Training Gym", position:{lat:14.6357,lng:-90.5132}, description:"Great vibes ‚Äì grab a smoothie at the desk!", address:"5 Av. 8-40 Zona 1, Guatemala City, Guatemala", link:""},

  {country:"Guatemala", city:"Panajachel", name:"Nativo Caf√©", position:{lat:14.7419,lng:-91.1569}, description:"Great coffee, breakfast amazing, friendly staff.", address:"Calle Del Frutal, Panajachel 07010", link:""},
  {country:"Guatemala", city:"Panajachel", name:"The Little Spoon", position:{lat:14.7424,lng:-91.1571}, description:"Great breakfast, affordable, welcoming staff.", address:"Calle Santander, Panajachel 07010", link:""},

  {country:"Guatemala", city:"Santiago Atitl√°n", name:"Space Coffee", position:{lat:14.6355,lng:-91.2290}, description:"Great coffee, amazing staff, beautiful space.", address:"02 AV 05-077, Calle las artesan√≠as, Santiago Atitl√°n", link:""}
];

// --- Map & Panel functions ---
function initMap(){
  map=new google.maps.Map(document.getElementById("map"),{ zoom:3, center:{lat:20,lng:-20} });
  addMarkers(places);
  renderPanel(places);
  document.getElementById("search-bar").addEventListener("keyup",filterPlaces);
}

function addMarkers(list){
  markers.forEach(m=>m.setMap(null));
  markers=[];
  list.forEach(p=>{
    const marker=new google.maps.Marker({ position:p.position, map:map, title:p.name, animation:google.maps.Animation.DROP });
    const info=new google.maps.InfoWindow({content:`<h3>${p.name}</h3><p>${p.description}</p><p><em>${p.address}</em></p>${p.link?`<p><a href="${p.link}" target="_blank">Website/IG</a></p>`:''}`});
    marker.addListener("click",()=>info.open(map,marker));
    markers.push(marker);
  });
}

function renderPanel(list){
  const panel=document.getElementById("bottom-list");
  panel.innerHTML='';
  const grouped={};
  list.forEach(p=>{ if(!grouped[p.country]) grouped[p.country]={}; if(!grouped[p.country][p.city]) grouped[p.country][p.city]=[]; grouped[p.country][p.city].push(p); });

  Object.keys(grouped).forEach(country=>{
    const countryDet=document.createElement("details"); countryDet.open=false;
    const countrySum=document.createElement("summary"); countrySum.textContent=country;
    countryDet.appendChild(countrySum);

    Object.keys(grouped[country]).forEach(city=>{
      const cityDet=document.createElement("details"); cityDet.open=false;
      const citySum=document.createElement("summary"); citySum.textContent=city;
      cityDet.appendChild(citySum);

      const ul=document.createElement("ul");
      grouped[country][city].forEach(place=>{
        const li=document.createElement("li"); 
        li.innerHTML=`<strong>${place.name}</strong><br><small>${place.description}</small>${place.link?`<br><a href="${place.link}" target="_blank" style="color:#8e44ad;">Website/IG</a>`:''}`;
        li.addEventListener("click",()=>{
          map.setCenter(place.position); map.setZoom(15);
          const marker=markers.find(m=>m.title===place.name);
          if(marker){ new google.maps.InfoWindow({content:`<h3>${place.name}</h3><p>${place.description}</p><p><em>${place.address}</em></p>${place.link?`<p><a href="${place.link}" target="_blank">Website/IG</a></p>`:''}`}).open(map,marker);}
          document.querySelectorAll("#bottom-list details details").forEach(d=>d.open=false);
        });
        ul.appendChild(li);
      });
      cityDet.appendChild(ul);
      countryDet.appendChild(cityDet);
      citySum.addEventListener("click",()=>{ document.querySelectorAll("#bottom-list details details").forEach(other=>{ if(other!==cityDet) other.open=false; }); });
    });
    panel.appendChild(countryDet);
  });
}

function filterPlaces(){
  const term=document.getElementById("search-bar").value.toLowerCase();
  const filtered=places.filter(p=>p.name.toLowerCase().includes(term)||p.description.toLowerCase().includes(term)||p.address.toLowerCase().includes(term));
  renderPanel(filtered);
  addMarkers(filtered);
}
</script>
</head>
<body onload="initMap()">
<header>
  <h1>Zoe's Atlas üêû</h1>
  <p>Discover curated, welcoming spots! Click a place below to zoom in on the map.</p>
</header>

<div id="map"></div>

<div id="bottom-panel">
  <h2>Search & Explore</h2>
  <input type="text" id="search-bar" placeholder="Search for a place..." aria-label="Search places">
  <div id="bottom-list"></div>
</div>
</body>
</html>
