<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Zoe Atlas üêû</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body, html { margin:0; padding:0; height:100%; font-family:'Arial', sans-serif; background:#fef6f9; }

  /* Header */
  header {
    width:100%;
    padding:20px;
    background: linear-gradient(135deg, #8e44ad, #ff6b81, #1abc9c, #3498db);
    color:white;
    text-align:center;
    box-shadow:0 3px 8px rgba(0,0,0,0.2);
  }
  header h1 { margin:0; font-size:2.2em; text-shadow:1px 1px 2px rgba(0,0,0,0.2);}
  header p { margin:5px 0 0 0; font-size:1em; font-weight:500; }

  /* Map */
  #map { width:100%; height:calc(100% - 330px); border-bottom:4px solid #8e44ad; }

  /* Bottom panel */
  #bottom-panel {
    position:fixed;
    bottom:0;
    left:0;
    width:100%;
    max-height:330px;
    background:#ffffffcc;
    color:#1b2631;
    overflow-y:auto;
    border-top:4px solid #8e44ad;
    padding:15px 20px;
    box-sizing:border-box;
    z-index:1000;
    backdrop-filter:blur(10px);
    border-radius:12px 12px 0 0;
  }
  #bottom-panel h2 { margin:0 0 10px 0; font-size:1.2em; color:#8e44ad; text-align:center; }

  #search-bar { width:100%; padding:8px; border-radius:20px; border:2px solid #8e44ad; margin-bottom:12px; font-size:0.95em; transition:0.3s; }
  #search-bar:focus { outline:none; border-color:#ff6b81; box-shadow:0 0 6px #ff6b81; }

  details { margin-bottom:6px; border-radius:8px; background:#e8f6f3; padding:6px 10px; border:1px solid #1abc9c; transition:0.3s; }
  details[open] { background: linear-gradient(120deg, #ffe6f0, #c8f7dc); transform:scale(1.02); }
  summary { cursor:pointer; font-weight:bold; font-size:0.95em; }
  
  ul { list-style:none; padding-left:15px; margin:5px 0 0 0; }
  li { padding:6px 10px; margin-bottom:5px; border-radius:6px; background:linear-gradient(90deg, #ffedf0, #d0f0f0); cursor:pointer; transition:0.3s; }
  li:hover { background:linear-gradient(90deg, #ffb6c1, #a3e4d7); transform:scale(1.03); box-shadow:0 2px 6px rgba(0,0,0,0.15); }

  #bottom-panel::-webkit-scrollbar { width:8px; }
  #bottom-panel::-webkit-scrollbar-thumb { background:#8e44ad; border-radius:4px; }

  @media (max-width:768px){
    #map { height:calc(100% - 350px); }
  }
</style>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB38rOcYSnjrdPynqMR6i0vpP8ZYi1Z2W4"></script>
<script>
let map;
let markers=[];
const places=[/* same full list of places with name, description, address, link */];

function initMap(){
  map=new google.maps.Map(document.getElementById("map"),{ zoom:3, center:{lat:20,lng:-20} });
  addMarkers(places);
  renderPanel(places);
  document.getElementById("search-bar").addEventListener("keyup",filterPlaces);
}

function addMarkers(list){
  markers.forEach(m=>m.setMap(null));
  markers=[];
  list.forEach(p=>{
    const marker=new google.maps.Marker({ position:p.position, map:map, title:p.name, animation:google.maps.Animation.DROP });
    const info=new google.maps.InfoWindow({content:`<h3>${p.name}</h3><p>${p.description}</p><p><em>${p.address}</em></p>${p.link?`<p><a href="${p.link}" target="_blank">Website/IG</a></p>`:''}`});
    marker.addListener("click",()=>info.open(map,marker));
    markers.push(marker);
  });
}

function renderPanel(list){
  const panel=document.getElementById("bottom-list");
  panel.innerHTML='';
  const grouped={};
  list.forEach(p=>{ if(!grouped[p.country]) grouped[p.country]={}; if(!grouped[p.country][p.city]) grouped[p.country][p.city]=[]; grouped[p.country][p.city].push(p); });

  Object.keys(grouped).forEach(country=>{
    const countryDet=document.createElement("details"); countryDet.open=false;
    const countrySum=document.createElement("summary"); countrySum.textContent=country;
    countryDet.appendChild(countrySum);

    Object.keys(grouped[country]).forEach(city=>{
      const cityDet=document.createElement("details"); cityDet.open=false;
      const citySum=document.createElement("summary"); citySum.textContent=city;
      cityDet.appendChild(citySum);

      const ul=document.createElement("ul");
      grouped[country][city].forEach(place=>{
        const li=document.createElement("li"); 
        li.innerHTML=`<strong>${place.name}</strong><br><small>${place.description}</small>`;
        li.addEventListener("click",()=>{
          map.setCenter(place.position); map.setZoom(15);
          const marker=markers.find(m=>m.title===place.name);
          if(marker){ new google.maps.InfoWindow({content:`<h3>${place.name}</h3><p>${place.description}</p><p><em>${place.address}</em></p>${place.link?`<p><a href="${place.link}" target="_blank">Website/IG</a></p>`:''}`}).open(map,marker);}
          document.querySelectorAll("#bottom-list details details").forEach(d=>d.open=false);
        });
        ul.appendChild(li);
      });
      cityDet.appendChild(ul);
      countryDet.appendChild(cityDet);
      citySum.addEventListener("click",()=>{ document.querySelectorAll("#bottom-list details details").forEach(other=>{ if(other!==cityDet) other.open=false; }); });
    });
    panel.appendChild(countryDet);
  });
}

function filterPlaces(){
  const term=document.getElementById("search-bar").value.toLowerCase();
  const filtered=places.filter(p=>p.name.toLowerCase().includes(term)||p.description.toLowerCase().includes(term)||p.address.toLowerCase().includes(term));
  renderPanel(filtered);
  addMarkers(filtered);
}
</script>
</head>
<body onload="initMap()">
<header>
  <h1>Zoe's Atlas üêû</h1>
  <p>Curated Black-friendly spots around the world üåé Click a place below to zoom in!</p>
</header>

<div id="map"></div>

<div id="bottom-panel">
  <h2>Search & Explore</h2>
  <input type="text" id="search-bar" placeholder="Search for a place..." aria-label="Search places">
  <div id="bottom-list"></div>
</div>
</body>
</html>
