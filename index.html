<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Zoe Atlas üêû</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f8f8f8;
      color: #333;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    header {
      background-color: #ff66b2;
      color: white;
      text-align: center;
      padding: 15px;
    }
    header h1 {
      font-size: 1.8em;
      margin: 0;
    }
    header p {
      font-size: 0.9em;
      margin: 5px 0 0;
    }
    .main-container {
      display: flex;
      flex-grow: 1;
      flex-direction: column;
    }
    #sidebar {
      width: 100%;
      background-color: #e6e6e6;
      padding: 15px;
      overflow-y: auto;
      order: 2;
    }
    #map {
      height: 400px;
      width: 100%;
      order: 1;
    }
    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 15px;
    }
    .controls input[type="text"],
    .controls select {
      padding: 7px;
      border: 1px solid #c4c4c4;
      border-radius: 5px;
      font-size: 0.9em;
      flex-grow: 1;
      min-width: 120px;
    }
    .controls button {
        padding: 7px;
        border: 1px solid #d9b2c2;
        background-color: #d9b2c2;
        color: white;
        font-weight: bold;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s;
        flex-grow: 1;
    }
    .controls button:hover {
        background-color: #c49eb0;
    }
    .places-list h2 {
      margin-top: 0;
      color: #7d3c93;
      font-size: 1.5em;
    }
    details {
      margin-bottom: 8px;
      border: 1px solid #c4c4c4;
      border-radius: 5px;
      background: white;
      padding: 8px;
    }
    summary {
      font-weight: bold;
      font-size: 1.1em;
      cursor: pointer;
      color: #2c3e50;
      transition: color 0.3s;
    }
    summary:hover {
      color: #55b89a;
    }
    ul {
      list-style: none;
      padding: 0;
      margin: 8px 0 0 10px;
    }
    li {
      margin-bottom: 8px;
      cursor: pointer;
      padding: 6px;
      border: 1px solid #d4d4d4;
      border-radius: 5px;
      background: #fafafa;
      transition: background 0.3s;
      font-size: 0.9em;
      color: #555;
    }
    li:hover {
      background: #f0f0f0;
    }
    .active-item {
        background-color: #d9b2c2;
        font-weight: bold;
    }
    footer {
      background-color: #ff66b2;
      color: white;
      text-align: center;
      padding: 10px;
      margin-top: auto;
      font-size: 0.85em;
    }
    @media (min-width: 768px) {
      header {
        padding: 20px;
      }
      header h1 {
        font-size: 2.5em;
      }
      header p {
        font-size: 1em;
      }
      .main-container {
        flex-direction: row;
      }
      #sidebar {
        width: 350px;
        max-height: calc(100vh - 84px);
        border-right: 2px solid #d9b2c2;
        order: 1;
        padding: 20px;
      }
      #map {
        height: auto;
        flex-grow: 1;
        order: 2;
      }
      .controls {
        gap: 10px;
      }
      .controls input[type="text"],
      .controls select {
        padding: 8px;
        font-size: 1em;
      }
      .places-list h2 {
        font-size: 1.7em;
      }
      details {
        margin-bottom: 10px;
        padding: 10px;
      }
      summary {
        font-size: 1.2em;
      }
      ul {
        margin: 10px 0 0 15px;
      }
      li {
        margin-bottom: 10px;
        padding: 8px;
        font-size: 1em;
      }
      footer {
        font-size: 0.9em;
      }
    }
  </style>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB38rOcYSnjrdPynqMR6i0vpP8ZYi1Z2W4"></script>
  <script>
    let map;
    let markers = [];

    const categoryEmoji = {
      hotel: "üè®",
      restaurant: "üçΩÔ∏è",
      coffee: "‚òï",
      shop: "üõçÔ∏è",
      gym: "üí™"
    };

    const countryMapPositions = {
      "Ireland": { lat: 53.4, lng: -7.9, zoom: 7 },
      "Spain": { lat: 40.4, lng: -3.7, zoom: 6 },
      "Guatemala": { lat: 15.7, lng: -90.2, zoom: 7 }
    };

    const places = [
      { country: "Ireland", city: "Dublin", name: "Nine Crows Vintage", category: "shop", position: { lat: 53.3437, lng: -6.2646 }, description: "Curated Y2K vintage ‚Äì diverse staff, fun vibe.", address: "22 Temple Lane S, Dublin 2, D02 HP52, Ireland" },
      { country: "Ireland", city: "Dublin", name: "Lou's Lot (George's Street Arcade)", category: "shop", position: { lat: 53.3425, lng: -6.2634 }, description: "Luxury vintage inside the arcade.", address: "South Great George's Street, Dublin 2, Ireland" },
      { country: "Ireland", city: "Dublin", name: "Copper and Straw", category: "coffee", position: { lat: 53.3461, lng: -6.2638 }, description: "Great coffee & friendly staff.", address: "Aston Quay, Temple Bar, Dublin, D02 FV38, Ireland" },
      { country: "Ireland", city: "Dublin", name: "George's Arcade", category: "shop", position: { lat: 53.3430, lng: -6.2635 }, description: "Open-air market full of character.", address: "South Great George's Street, Dublin 2, Ireland" },
      { country: "Ireland", city: "Dublin", name: "Bambino's", category: "restaurant", position: { lat: 53.3395, lng: -6.2651 }, description: "Cozy pizza spot, local favorite.", address: "37 Stephen Street Lower, Dublin 2, D02 T862, Ireland" },
      { country: "Ireland", city: "Dublin", name: "The Big Smoke Vintage Clothing", category: "shop", position: { lat: 53.3452, lng: -6.2639 }, description: "Vintage treasures by Merchant‚Äôs Arch.", address: "Merchant's Arch, Dublin 2, D02 WP27, Ireland" },
      { country: "Spain", city: "Madrid", name: "Amazing Coffee", category: "coffee", position: { lat: 40.4112, lng: -3.7035 }, description: "Great vibe, Colombian owner ‚Äì hot spot.", address: "C. de San Mill√°n, 4, Centro, 28012 Madrid, Spain" },
      { country: "Spain", city: "Madrid", name: "Hot Now Pizza", category: "restaurant", position: { lat: 40.4235, lng: -3.6994 }, description: "Great pizza spot.", address: "C. de Barbieri, 14, Centro, 28004 Madrid, Spain" },
      { country: "Spain", city: "Madrid", name: "Han So Caf√©", category: "coffee", position: { lat: 40.4240, lng: -3.7060 }, description: "Trendy coffee + caf√© spot in Malasa√±a.", address: "Calle Pez 20, Barrio Malasa√±a, 28004, Madrid" },
      { country: "Spain", city: "Madrid", name: "San Miguel Market", category: "shop", position: { lat: 40.4154, lng: -3.7094 }, description: "Big, bustling market ‚Äì must visit.", address: "Plaza de San Miguel, 28005 Madrid, Spain" },
      { country: "Spain", city: "Madrid", name: "Honest Greens", category: "restaurant", position: { lat: 40.4512, lng: -3.6889 }, description: "Cheap & healthy food ‚Äì any location works.", address: "Paseo de la Castellana, 89, 28046, Madrid" },
      { country: "Spain", city: "Madrid", name: "Humana (Thrift Store)", category: "shop", position: { lat: 40.4236, lng: -3.6717 }, description: "Great deals, some items from ‚Ç¨2, discounts on certain days.", address: "Calle de Alcal√°, 171, 28009, Madrid" },
      { country: "Spain", city: "Madrid", name: "By Pillow Hostel", category: "hotel", position: { lat: 40.4107, lng: -3.7026 }, description: "Great location, friendly staff.", address: "Calle de Jes√∫s y Mar√≠a, 12, 28012, Madrid" },
      { country: "Spain", city: "Madrid", name: "Ambu Nu√±ez Caf√©", category: "coffee", position: { lat: 40.4292, lng: -3.6831 }, description: "Excellent coffee ‚Äì cold brew is amazing. Two locations.", address: "Calle Nu√±ez de Balboa 28, 28001 Madrid, Spain" },
      { country: "Spain", city: "Madrid", name: "Alma Nomad Bakery", category: "restaurant", position: { lat: 40.4368, lng: -3.7009 }, description: "Great bakery ‚Äì two locations, plus pizza shop nearby.", address: "C/ Sta. Feliciana 10, 28010 Madrid, Spain" },
      { country: "Spain", city: "Madrid", name: "Alma Nomad Pizza", category: "restaurant", position: { lat: 40.4365, lng: -3.7015 }, description: "Delicious pizza by Alma Nomad Bakery.", address: "C. de Sta. Feliciana, 4, 28010 Madrid, Spain" },
      { country: "Spain", city: "Barcelona", name: "De La Creme", category: "restaurant", position: { lat: 41.3907, lng: 2.1594 }, description: "Great gelato & friendly staff.", address: "Carrer d'Enric Granados, 15, 08007 Barcelona, Spain" },
      { country: "Spain", city: "Barcelona", name: "Honest Greens", category: "restaurant", position: { lat: 41.3888, lng: 2.1590 }, description: "Healthy, delicious food at good prices.", address: "Various locations, Barcelona, Spain" },
      { country: "Spain", city: "Barcelona", name: "Hotel Market", category: "hotel", position: { lat: 41.3787, lng: 2.1598 }, description: "Excellent location, great staff & accommodations.", address: "Carrer del Comte Borrell, 68, 08015 Barcelona, Spain" },
      { country: "Spain", city: "Barcelona", name: "Papa D√¢m", category: "restaurant", position: { lat: 41.3779, lng: 2.1623 }, description: "Delicious food ‚Äì try the garlic rice!", address: "Rda. de Sant Pau, 11, 08015 Barcelona, Spain" },
      { country: "Spain", city: "Barcelona", name: "Origo", category: "coffee", position: { lat: 41.3778, lng: 2.1638 }, description: "Amazing staff, cardamom bun + coffee spot.", address: "Rda. de Sant Pau, 67, 08015 Barcelona, Spain" },
      { country: "Guatemala", city: "Antigua", name: "Hotel Casa Do√±a Antonia", category: "hotel", position: { lat: 14.5560, lng: -90.7336 }, description: "Gorgeous hotel ‚Äì breakfast amazing, staff so welcoming.", address: "1A Calle Oriente 9A, Casa 9, Alameda Santa Rosa, Antigua, Guatemala" },
      { country: "Guatemala", city: "Antigua", name: "Casa Donya Hotel Antigua", category: "hotel", position: { lat: 14.5591, lng: -90.7340 }, description: "Beautiful venue ‚Äì phenomenal pizza, welcoming staff.", address: "3a Calle Oriente 16a, Antigua Guatemala, Sacatep√©quez" },
      { country: "Guatemala", city: "Antigua", name: "La Tasca", category: "restaurant", position: { lat: 14.5825, lng: -90.6768 }, description: "Great vibes ‚Äì get the shrimp tostadas.", address: "2 Avenida, Magdalena Milpas Altas, Sacatep√©quez" },
      { country: "Guatemala", city: "Guatemala City", name: "12 ONZAS", category: "coffee", position: { lat: 14.6039, lng: -90.4880 }, description: "Great coffee & matcha, beautiful space to relax.", address: "Calle 3-57 13, Zona 10, Guatemala City, 01010", link: "https://12onzas.com" },
      { country: "Guatemala", city: "Guatemala City", name: "Oakland Mall", category: "shop", position: { lat: 14.6019, lng: -90.5133 }, description: "Beautiful mall ‚Äì very welcoming.", address: "Local 115 A, Calle Real de la Villa Guadalupe, 13-01, Zona 10, Guatemala City" },
      { country: "Guatemala", city: "Guatemala City", name: "Mega Paca (Thrift Store)", category: "shop", position: { lat: 14.6291, lng: -90.5174 }, description: "Huge thrift store, great deals, welcoming staff.", address: "19 Avenida 10-63, Guatemala, 01011" },
      { country: "Guatemala", city: "Guatemala City", name: "Smart Training Gym", category: "gym", position: { lat: 14.6357, lng: -90.5132 }, description: "Great vibes ‚Äì grab a smoothie at the desk!", address: "5 Av. 8-40 Zona 1, Guatemala City, Guatemala" },
      { country: "Guatemala", city: "Panajachel", name: "Nativo Caf√©", category: "coffee", position: { lat: 14.7419, lng: -91.1569 }, description: "Great coffee, breakfast amazing, friendly staff.", address: "Calle Del Frutal, Panajachel 07010" },
      { country: "Guatemala", city: "Panajachel", name: "The Little Spoon", category: "restaurant", position: { lat: 14.7424, lng: -91.1571 }, description: "Great breakfast, affordable, welcoming staff.", address: "Calle Santander, Panajachel 07010" },
      { country: "Guatemala", city: "Santiago Atitl√°n", name: "Space Coffee", category: "coffee", position: { lat: 14.6355, lng: -91.2290 }, description: "Great coffee, amazing staff, beautiful space.", address: "02 AV 05-077, Calle las artesan√≠as, Santiago Atitl√°n" }
    ];

    function createPlaceItem(place) {
      const li = document.createElement("li");
      li.innerHTML = `<strong>${categoryEmoji[place.category] || ""} ${place.name}</strong><br><small>${place.description}</small>`;
      li.addEventListener("click", () => {
        document.querySelectorAll('#place-list li').forEach(item => {
          item.classList.remove('active-item');
        });
        li.classList.add('active-item');
        map.setCenter(place.position);
        map.setZoom(15);
        const marker = markers.find(m => m.title === place.name);
        if (marker) {
          const infoWindow = new google.maps.InfoWindow({
            content: createInfoWindowContent(place)
          });
          infoWindow.open(map, marker);
        }
      });
      return li;
    }

    function createInfoWindowContent(place) {
      return `
        <h3>${categoryEmoji[place.category] || ""} ${place.name}</h3>
        <p>${place.description}</p>
        ${place.tip ? `<p><strong>Tip:</strong> ${place.tip}</p>` : ''}
        ${place.link ? `<p><a href="${place.link}" target="_blank">More info</a></p>` : ''}
        <p><em>${place.address}</em></p>
      `;
    }

    function renderPlaces(filteredPlaces) {
      const list = document.getElementById("place-list");
      list.innerHTML = '';
      const grouped = {};
      filteredPlaces.forEach(place => {
        if (!grouped[place.country]) grouped[place.country] = {};
        if (!grouped[place.country][place.city]) grouped[place.country][place.city] = [];
        grouped[place.country][place.city].push(place);
      });
      Object.keys(grouped).forEach(country => {
        const countryDetails = document.createElement("details");
        const countrySummary = document.createElement("summary");
        countrySummary.textContent = country;
        countrySummary.addEventListener("click", (event) => {
            event.preventDefault();
            const position = countryMapPositions[country];
            if (position) {
                map.setCenter({ lat: position.lat, lng: position.lng });
                map.setZoom(position.zoom);
            }
        });
        countryDetails.appendChild(countrySummary);
        Object.keys(grouped[country]).forEach(city => {
          const cityDetails = document.createElement("details");
          const citySummary = document.createElement("summary");
          citySummary.textContent = city;
          cityDetails.appendChild(citySummary);
          const ul = document.createElement("ul");
          grouped[country][city].forEach(place => {
            ul.appendChild(createPlaceItem(place));
          });
          cityDetails.appendChild(ul);
          countryDetails.appendChild(cityDetails);
        });
        list.appendChild(countryDetails);
      });
    }

    function addMarkersToMap(filteredPlaces) {
      markers.forEach(marker => marker.setMap(null));
      markers = [];
      filteredPlaces.forEach(place => {
        const marker = new google.maps.Marker({
          position: place.position,
          map: map,
          title: place.name,
          animation: google.maps.Animation.DROP
        });
        const infoWindow = new google.maps.InfoWindow({
          content: createInfoWindowContent(place)
        });
        marker.addListener("click", () => {
          infoWindow.open(map, marker);
        });
        markers.push(marker);
      });
    }
    
    function resetMapToGlobalView() {
        map.setZoom(2);
        map.setCenter({ lat: 20, lng: -10 });
        document.getElementById("search-bar").value = '';
        document.getElementById("category-filter").value = 'all';
        filterPlaces();
    }

    function filterPlaces() {
      const searchTerm = document.getElementById("search-bar").value.toLowerCase();
      const categoryFilter = document.getElementById("category-filter").value;
      const filtered = places.filter(place => {
        const matchesSearch = place.name.toLowerCase().includes(searchTerm) ||
                              place.description.toLowerCase().includes(searchTerm) ||
                              place.address.toLowerCase().includes(searchTerm);
        const matchesCategory = categoryFilter === "all" || place.category === categoryFilter;
        return matchesSearch && matchesCategory;
      });
      renderPlaces(filtered);
      addMarkersToMap(filtered);
    }

    function initMap() {
      map = new google.maps.Map(document.getElementById("map"), {
        zoom: 2,
        center: { lat: 20, lng: -10 }
      });
      renderPlaces(places);
      addMarkersToMap(places);
      document.getElementById("search-bar").addEventListener("keyup", filterPlaces);
      document.getElementById("category-filter").addEventListener("change", filterPlaces);
      document.getElementById("reset-view").addEventListener("click", resetMapToGlobalView);
    }
  </script>
</head>
<body onload="initMap()">
  <header>
    <h1>Zoe Atlas üêû</h1>
    <p>Curated, Black-friendly, and welcoming spots across the globe</p>
    <p class="instructions">Click on a place in the list to jump to its location on the map, or click a pin directly to see more info!</p>
  </header>
  <div class="main-container">
    <div id="sidebar">
      <div class="controls">
        <input type="text" id="search-bar" placeholder="Search places..." aria-label="Search places">
        <select id="category-filter" aria-label="Filter by category">
          <option value="all">All Categories</option>
          <option value="hotel">Hotels üè®</option>
          <option value="restaurant">Restaurants üçΩÔ∏è</option>
          <option value="coffee">Coffee ‚òï</option>
          <option value="shop">Shops üõçÔ∏è</option>
          <option value="gym">Gyms üí™</option>
        </select>
        <button id="reset-view">View All Locations</button>
      </div>
      <div class="places-list">
        <h2>Places</h2>
        <div id="place-list"></div>
      </div>
    </div>
    <div id="map"></div>
  </div>
  <footer>
    <p>Curated with ‚ù§Ô∏è by Zoe</p>
  </footer>
</body>
</html>