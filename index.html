<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Zoe's Atlas üêû</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      height: 100vh;
      overflow: hidden;
    }
    header {
      background-color: #ff66b2;
      color: white;
      text-align: center;
      padding: 15px 10px;
      border-bottom: 4px solid #ff3399;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 1200;
    }
    header h1 {
      margin: 0;
      font-size: 1.8em;
    }
    header p {
      margin: 5px 0 0;
      font-size: 1em;
    }

    /* Sidebar */
    #sidebar {
      width: 300px;
      background: #f0fff0;
      border-right: 3px solid #ff85c1;
      overflow-y: auto;
      padding: 10px;
      position: fixed;
      top: 90px; /* under header */
      bottom: 0;
      left: 0;
      transition: left 0.3s ease;
      z-index: 1100;
      display: flex;
      flex-direction: column;
    }
    #sidebar.closed {
      left: -300px;
    }

    #map {
      margin-left: 300px;
      height: 100%;
      margin-top: 90px; /* under header */
      transition: margin-left 0.3s ease;
    }
    #map.full {
      margin-left: 0;
    }

    #sidebar h2 {
      margin-top: 0;
      color: #ff3399;
    }
    .controls {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 15px;
    }
    #search-bar {
      width: 100%;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-sizing: border-box;
    }
    #reset-view {
      width: 100%;
      padding: 8px;
      border: none;
      background-color: #ff66b2;
      color: white;
      border-radius: 5px;
      cursor: pointer;
    }

    details {
      margin-bottom: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      background: white;
      padding: 5px;
    }
    summary {
      font-weight: bold;
      cursor: pointer;
    }
    ul {
      list-style: none;
      padding: 0;
      margin: 10px 0 0 10px;
    }
    li {
      margin-bottom: 8px;
      cursor: pointer;
      padding: 6px;
      border: 1px solid #ddd;
      border-radius: 4px;
      background: #fafafa;
      transition: background 0.3s;
    }
    li:hover {
      background: #f0f0f0;
    }

    /* Toggle Button */
    #sidebar-toggle {
      position: fixed;
      top: 120px;
      left: 0;
      z-index: 1300;
      background: #ff85c1;
      color: white;
      border: none;
      padding: 5px 10px;
      cursor: pointer;
      border-radius: 0 5px 5px 0;
    }

    footer {
      background-color: #ff66b2;
      color: white;
      text-align: center;
      padding: 8px;
      position: fixed;
      bottom: 0;
      width: 100%;
      font-size: 0.9em;
      z-index: 1200;
    }

    @media screen and (max-width: 768px) {
      #sidebar {
        width: 240px;
      }
      #map {
        margin-left: 240px;
      }
    }
  </style>
  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY_HERE"></script>
  <script>
    let map;
    let markers = [];
    const places = [
      // Ireland üáÆüá™
      { country:"üáÆüá™ Ireland", city:"Dublin", name:"Nine Crows Vintage", position:{lat:53.3437,lng:-6.2646}, description:"Curated Y2K vintage ‚Äì diverse staff, fun vibe.", address:"22 Temple Lane S, Dublin 2, D02 HP52, Ireland" },
      { country:"üáÆüá™ Ireland", city:"Dublin", name:"Lou's Lot (George's Street Arcade)", position:{lat:53.3425,lng:-6.2634}, description:"Luxury vintage inside the arcade.", address:"South Great George's Street, Dublin 2, Ireland" },
      { country:"üáÆüá™ Ireland", city:"Dublin", name:"Copper and Straw", position:{lat:53.3461,lng:-6.2638}, description:"Great coffee & friendly staff.", address:"Aston Quay, Temple Bar, Dublin, D02 FV38, Ireland" },

      // Spain üá™üá∏
      { country:"üá™üá∏ Spain", city:"Madrid", name:"Amazing Coffee", position:{lat:40.4112,lng:-3.7035}, description:"Great vibe, Colombian owner ‚Äì hot spot.", address:"C. de San Mill√°n, 4, Centro, 28012 Madrid, Spain" },
      { country:"üá™üá∏ Spain", city:"Barcelona", name:"De La Creme", position:{lat:41.3907,lng:2.1594}, description:"Great gelato & friendly staff.", address:"Carrer d'Enric Granados, 15, 08007 Barcelona, Spain" },

      // Guatemala üá¨üáπ
      { country:"üá¨üáπ Guatemala", city:"Antigua", name:"Hotel Casa Do√±a Antonia", position:{lat:14.5560,lng:-90.7336}, description:"Gorgeous hotel ‚Äì breakfast amazing, staff so welcoming.", address:"1A Calle Oriente 9A, Casa 9, Alameda Santa Rosa, Antigua, Guatemala" },
      { country:"üá¨üáπ Guatemala", city:"Guatemala City", name:"12 ONZAS", position:{lat:14.6039,lng:-90.4880}, description:"Great coffee & matcha, beautiful space to relax.", address:"Calle 3-57 13, Zona 10, Guatemala City, 01010", link:"https://12onzas.com" }
    ];

    function addMarkersToMap(filteredPlaces) {
      markers.forEach(marker => marker.setMap(null));
      markers = [];
      filteredPlaces.forEach(place => {
        const marker = new google.maps.Marker({
          position: place.position,
          map: map,
          title: place.name,
          animation: google.maps.Animation.DROP
        });
        const infoContent = `<h3>${place.name}</h3>
                             <p>${place.description}</p>
                             <p><em>${place.address}</em></p>
                             ${place.link ? `<p><a href="${place.link}" target="_blank">Website</a></p>` : ''}`;
        const infoWindow = new google.maps.InfoWindow({content: infoContent});
        marker.addListener("click", () => infoWindow.open(map, marker));
        markers.push(marker);
      });
    }

    function renderPlaces(filteredPlaces) {
      const list = document.getElementById("place-list");
      list.innerHTML = '';
      const grouped = {};
      filteredPlaces.forEach(place => {
        if(!grouped[place.country]) grouped[place.country]={};
        if(!grouped[place.country][place.city]) grouped[place.country][place.city]=[];
        grouped[place.country][place.city].push(place);
      });

      Object.keys(grouped).forEach(country=>{
        const countryDetails=document.createElement("details");
        const countrySummary=document.createElement("summary");
        countrySummary.textContent=country;
        countryDetails.appendChild(countrySummary);

        Object.keys(grouped[country]).forEach(city=>{
          const cityDetails=document.createElement("details");
          const citySummary=document.createElement("summary");
          citySummary.textContent=city;
          cityDetails.appendChild(citySummary);
          const ul=document.createElement("ul");
          grouped[country][city].forEach(place=>{
            const li=document.createElement("li");
            li.innerHTML=`<strong>${place.name}</strong><br><small>${place.description}</small>`;
            li.addEventListener("click",()=>{
              map.setCenter(place.position);
              map.setZoom(15);
              const marker=markers.find(m=>m.title===place.name);
              if(marker){
                new google.maps.InfoWindow({
                  content:`<h3>${place.name}</h3><p>${place.description}</p><p><em>${place.address}</em></p>`
                }).open(map, marker);
              }
            });
            ul.appendChild(li);
          });
          cityDetails.appendChild(ul);
          countryDetails.appendChild(cityDetails);
        });
        list.appendChild(countryDetails);
      });
    }

    function filterPlaces() {
      const searchTerm=document.getElementById("search-bar").value.toLowerCase();
      const filtered=places.filter(p=>p.name.toLowerCase().includes(searchTerm)||
                                        p.description.toLowerCase().includes(searchTerm)||
                                        p.address.toLowerCase().includes(searchTerm));
      renderPlaces(filtered);
      addMarkersToMap(filtered);
    }

    function resetView(){
      document.getElementById("search-bar").value="";
      map.setZoom(3);
      map.setCenter({lat:20,lng:-20});
      filterPlaces();
    }

    function initMap(){
      map=new google.maps.Map(document.getElementById("map"),{
        zoom:3,
        center:{lat:20,lng:-20}
      });
      addMarkersToMap(places);
      renderPlaces(places);
      document.getElementById("search-bar").addEventListener("keyup",filterPlaces);
      document.getElementById("reset-view").addEventListener("click",resetView);
    }

    // Sidebar toggle
    function toggleSidebar(){
      document.getElementById('sidebar').classList.toggle('closed');
      document.getElementById('map').classList.toggle('full');
    }
  </script>
</head>
<body onload="initMap()">
  <header>
    <h1>Zoe's Atlas üêû</h1>
    <p>Curated, Black-friendly spots around the globe üåé.<br>Click a place to zoom in & see details. Use the search bar to find a location!</p>
  </header>
  <button id="sidebar-toggle" onclick="toggleSidebar()">‚è©</button>
  <div id="sidebar">
    <div class="controls">
      <input type="text" id="search-bar" placeholder="Search places..." aria-label="Search places">
      <button id="reset-view">View All Locations</button>
    </div>
    <h2>Places</h2>
    <div id="place-list"></div>
  </div>
  <div id="map"></div>
  <footer>
    <p>Curated with ‚ù§Ô∏è by Zoe</p>
  </footer>
</body>
</html>
