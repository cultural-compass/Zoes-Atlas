<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Zoe Atlas üêû</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f8f8f8; /* Soft off-white for a clean look */
      color: #333; /* Dark gray for main text */
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    header {
      background-color: #ff66b2; /* Keeping this bright pink for a bold header */
      color: white;
      text-align: center;
      padding: 15px;
    }
    header h1 {
      font-size: 1.8em;
      margin: 0;
    }
    header p {
      font-size: 0.9em;
      margin: 5px 0 0;
    }
    .main-container {
      display: flex;
      flex-grow: 1;
      flex-direction: column;
    }
    #sidebar {
      width: 100%;
      background-color: #e6e6e6; /* Light gray background for the sidebar */
      padding: 15px;
      overflow-y: auto;
      order: 2;
    }
    #map {
      height: 400px;
      width: 100%;
      order: 1;
    }
    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 15px;
    }
    .controls input[type="text"],
    .controls select {
      padding: 7px;
      border: 1px solid #c4c4c4; /* Softer gray border */
      border-radius: 5px;
      font-size: 0.9em;
      flex-grow: 1;
      min-width: 120px;
    }
    .controls button {
        padding: 7px;
        border: 1px solid #d9b2c2;
        background-color: #d9b2c2;
        color: white;
        font-weight: bold;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s;
        flex-grow: 1;
    }
    .controls button:hover {
        background-color: #c49eb0;
    }
    .places-list h2 {
      margin-top: 0;
      color: #7d3c93; /* A professional shade of purple from your brand colors */
      font-size: 1.5em;
    }
    details {
      margin-bottom: 8px;
      border: 1px solid #c4c4c4; /* Light gray border for a clean look */
      border-radius: 5px;
      background: white;
      padding: 8px;
    }
    summary {
      font-weight: bold;
      font-size: 1.1em;
      cursor: pointer;
      color: #2c3e50; /* A dark, professional blue-gray */
      transition: color 0.3s;
    }
    summary:hover {
      color: #55b89a; /* A vibrant teal for the hover effect */
    }
    ul {
      list-style: none;
      padding: 0;
      margin: 8px 0 0 10px;
    }
    li {
      margin-bottom: 8px;
      cursor: pointer;
      padding: 6px;
      border: 1px solid #d4d4d4; /* A very light gray for list items */
      border-radius: 5px;
      background: #fafafa;
      transition: background 0.3s;
      font-size: 0.9em;
      color: #555; /* Slightly lighter text for list items */
    }
    li:hover {
      background: #f0f0f0;
    }
    .active-item {
        background-color: #d9b2c2; /* Soft pink background for active item */
        font-weight: bold;
    }
    footer {
      background-color: #ff66b2;
      color: white;
      text-align: center;
      padding: 10px;
      margin-top: auto;
      font-size: 0.85em;
    }

    /* --- Desktop/Tablet styles (min-width: 768px) --- */
    @media (min-width: 768px) {
      header {
        padding: 20px;
      }
      header h1 {
        font-size: 2.5em;
      }
      header p {
        font-size: 1em;
      }
      .main-container {
        flex-direction: row;
      }
      #sidebar {
        width: 350px;
        max-height: calc(100vh - 84px);
        border-right: 2px solid #d9b2c2; /* Using a darker pink for the desktop border */
        order: 1;
        padding: 20px;
      }
      #map {
        height: auto;
        flex-grow: 1;
        order: 2;
      }
      .controls {
        gap: 10px;
      }
      .controls input[type="text"],
      .controls select {
        padding: 8px;
        font-size: 1em;
      }
      .places-list h2 {
        font-size: 1.7em;
      }
      details {
        margin-bottom: 10px;
        padding: 10px;
      }
      summary {
        font-size: 1.2em;
      }
      ul {
        margin: 10px 0 0 15px;
      }
      li {
        margin-bottom: 10px;
        padding: 8px;
        font-size: 1em;
      }
      footer {
        font-size: 0.9em;
      }
    }
  </style>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB38rOcYSnjrdPynqMR6i0vpP8ZYi1Z2W4"></script>
  <script>
    let map;
    let markers = [];

    const categoryEmoji = {
      hotel: "üè®",
      restaurant: "üçΩÔ∏è",
      coffee: "‚òï",
      shop: "üõçÔ∏è",
      gym: "üí™"
    };

    // NEW: Geographic coordinates and zoom levels for each country
    const countryMapPositions = {
      "Ireland": { lat: 53.4, lng: -7.9, zoom: 7 },
      "Spain": { lat: 40.4, lng: -3.7, zoom: 6 },
      "Guatemala": { lat: 15.7, lng: -90.2, zoom: 7 }
    };

    const places = [
      // --- Dublin ---
      {
        country: "Ireland",
        city: "Dublin",
        name: "Nine Crows Vintage",
        category: "shop",
        position: { lat: 53.3437, lng: -6.2646 },
        description: "Curated Y2K vintage ‚Äì diverse staff, fun vibe.",
        tip: "",
        link: "",
        address: "22 Temple Lane S, Dublin 2, D02 HP52, Ireland"
      },
      {
        country: "Ireland",
        city: "Dublin",
        name: "Lou's Lot (George's Street Arcade)",
        category: "shop",
        position: { lat: 53.3425, lng: -6.2634 },
        description: "Luxury vintage inside the arcade.",
        tip: "",
        link: "",
        address: "South Great George's Street, Dublin 2, Ireland"
      },
      {
        country: "Ireland",
        city: "Dublin",
        name: "Copper and Straw",
        category: "coffee",
        position: { lat: 53.3461, lng: -6.2638 },
        description: "Great coffee & friendly staff.",
        tip: "",
        link: "",
        address: "Aston Quay, Temple Bar, Dublin, D02 FV38, Ireland"
      },
      {
        country: "Ireland",
        city: "Dublin",
        name: "George's Arcade",
        category: "shop",
        position: { lat: 53.3430, lng: -6.2635 },
        description: "Open-air market full of character.",
        tip: "",
        link: "",
        address: "South Great George's Street, Dublin 2, Ireland"
      },
      {
        country: "Ireland",
        city: "Dublin",
        name: "Bambino's",
        category: "restaurant",
        position: { lat: 53.3395, lng: -6.2651 },
        description: "Cozy pizza spot, local favorite.",
        tip: "",
        link: "",
        address: "37 Stephen Street Lower, Dublin 2, D02 T862, Ireland"
      },
      {
        country: "Ireland",
        city: "Dublin",
        name: "The Big Smoke Vintage Clothing",
        category: "shop",
        position: { lat: 53.3452, lng: -6.2639 },
        description: "Vintage treasures by Merchant‚Äôs Arch.",
        tip: "",
        link: "",
        address: "Merchant's Arch, Dublin 2, D02 WP27, Ireland"
      },

      // --- Madrid ---
      {
        country: "Spain",
        city: "Madrid",
        name: "Amazing Coffee (Colombian owner)",
        category: "coffee",
        position: { lat: 40.4112, lng: -3.7035 },
        description: "Great vibe, Colombian owner ‚Äì hot spot.",
        tip: