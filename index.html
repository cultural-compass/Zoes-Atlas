<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Zoe‚Äôs Atlas ‚Äì Cultural Compass</title>
  <style>
    body { margin: 0; font-family: Arial, sans-serif; display: flex; height: 100vh; }
    #map { flex: 3; height: 100vh; }
    #sidebar { flex: 1; overflow-y: auto; padding: 1em; background: #f7f7f7; }
    h2 { margin-top: 0; }
    ul { list-style: none; padding: 0; }
    li { margin: 0.5em 0; cursor: pointer; }
    li:hover { text-decoration: underline; }
    #searchBox { width: 100%; padding: 8px; margin-bottom: 12px; border: 1px solid #ccc; }
  </style>
</head>
<body>
  <div id="map"></div>
  <div id="sidebar">
    <h2>üåç Zoe‚Äôs Atlas</h2>
    <p>This is a living document of safe, welcoming places globally for Black travelers. ‚ú®</p>
    <input type="text" id="searchBox" placeholder="Search locations...">
    <div id="location-list"></div>
  </div>

  <script>
    let map;
    const locations = {
      "Ireland": {
        "Dublin": [
          {
            name: "Brother Hubbard",
            position: { lat: 53.348, lng: -6.260 },
            category: "‚òï",
            address: "153 Capel St, North City, Dublin",
            description: "Great coffee + brunch spot with vegan options.",
            link: "https://brotherhubbard.ie"
          },
          {
            name: "Books Upstairs",
            position: { lat: 53.345, lng: -6.259 },
            category: "üìö",
            address: "17 D'Olier Street, Dublin",
            description: "Independent bookstore with a cozy caf√© upstairs.",
            link: "https://booksupstairs.ie"
          }
        ]
      },
      "Spain": {
        "Barcelona": [
          {
            name: "Flax & Kale",
            position: { lat: 41.385, lng: 2.169 },
            category: "ü•ó",
            address: "Carrer dels Tallers 74b, Barcelona",
            description: "Flexitarian restaurant with great plant-based dishes.",
            link: "https://flaxandkale.com"
          }
        ]
      },
      "Guatemala": {
        "Antigua": [
          {
            name: "Hotel Casa Donya Antigua",
            position: { lat: 14.556, lng: -90.734 },
            category: "üè®",
            address: "1A Calle Oriente, Casa 9, Antigua, Guatemala",
            description: "Gorgeous hotel ‚Äì amazing breakfast & great staff."
          },
          {
            name: "Clio Pizza",
            position: { lat: 14.557, lng: -90.732 },
            category: "üçï",
            address: "3a Calle Oriente 16a, Antigua Guatemala",
            description: "Beautiful venue, phenomenal pizza, welcoming staff."
          },
          {
            name: "La Tasca",
            position: { lat: 14.549, lng: -90.699 },
            category: "üç§",
            address: "2 Avenida, Magdalena Milpas Altas, Sacatep√©quez",
            description: "Great vibes ‚Äì get the shrimp tostadas!"
          }
        ],
        "Guatemala City": [
          {
            name: "12 Onzas",
            position: { lat: 14.582, lng: -90.513 },
            category: "‚òï",
            address: "Calle 3-57 13 | Zona 10, Guatemala City",
            description: "Great coffee, matcha & beautiful relaxing space.",
            link: "https://12onzas.com"
          },
          {
            name: "Oakland Mall",
            position: { lat: 14.588, lng: -90.510 },
            category: "üõçÔ∏è",
            address: "Local 115 A, Zona 10, Guatemala City",
            description: "Beautiful mall ‚Äì very welcoming atmosphere."
          },
          {
            name: "Mega Paca",
            position: { lat: 14.629, lng: -90.548 },
            category: "üëï",
            address: "19 Avenida 10-63, Zona 11, Guatemala City",
            description: "Huge thrift store ‚Äì great deals & friendly staff."
          },
          {
            name: "Smart Training Gym",
            position: { lat: 14.640, lng: -90.513 },
            category: "üí™üèæ",
            address: "5 Av. 8-40 Zona 1, Guatemala City",
            description: "Great vibes ‚Äì grab a smoothie after training!"
          }
        ],
        "Panajachel": [
          {
            name: "Nativo Caf√©",
            position: { lat: 14.742, lng: -91.155 },
            category: "‚òï",
            address: "Calle Del Frutal, Panajachel",
            description: "Delicious coffee + breakfast, very welcoming staff."
          },
          {
            name: "The Little Spoon",
            position: { lat: 14.743, lng: -91.157 },
            category: "üç≥",
            address: "Calle Santander, Panajachel",
            description: "Great breakfast ‚Äì affordable & friendly."
          }
        ],
        "Lake Atitl√°n": [
          {
            name: "Space Coffee",
            position: { lat: 14.639, lng: -91.229 },
            category: "‚òï",
            address: "Santiago Atitl√°n zona 1, Calle las artesan√≠as",
            description: "Amazing coffee, beautiful space, lovely staff."
          }
        ]
      }
    };

    function initMap() {
      map = new google.maps.Map(document.getElementById("map"), {
        center: { lat: 20, lng: 0 },
        zoom: 2
      });

      const infoWindow = new google.maps.InfoWindow();
      const listDiv = document.getElementById("location-list");

      Object.entries(locations).forEach(([country, cities]) => {
        const countryHeader = document.createElement("h3");
        countryHeader.textContent = country;
        listDiv.appendChild(countryHeader);

        Object.entries(cities).forEach(([city, spots]) => {
          const cityHeader = document.createElement("h4");
          cityHeader.textContent = city;
          listDiv.appendChild(cityHeader);

          const ul = document.createElement("ul");
          listDiv.appendChild(ul);

          spots.forEach(loc => {
            const marker = new google.maps.Marker({
              position: loc.position,
              map,
              title: loc.name,
              animation: google.maps.Animation.DROP
            });

            const popupContent = `
              <div>
                <h3>${loc.category} ${loc.name}</h3>
                <p><b>Address:</b> ${loc.address}</p>
                <p>${loc.description}</p>
                ${loc.link ? `<p><a href="${loc.link}" target="_blank">Website</a></p>` : ""}
              </div>
            `;

            marker.addListener("click", () => {
              infoWindow.setContent(popupContent);
              infoWindow.open(map, marker);
              map.setCenter(marker.getPosition());
              map.setZoom(15);
            });

            const li = document.createElement("li");
            li.textContent = `${loc.category} ${loc.name}`;
            li.addEventListener("click", () => {
              map.setCenter(marker.getPosition());
              map.setZoom(15);
              infoWindow.setContent(popupContent);
              infoWindow.open(map, marker);
            });
            ul.appendChild(li);
          });
        });
      });

      // üîé Search functionality
      document.getElementById("searchBox").addEventListener("input", function () {
        const search = this.value.toLowerCase();
        document.querySelectorAll("#location-list li").forEach(li => {
          li.style.display = li.textContent.toLowerCase().includes(search) ? "" : "none";
        });
      });
    }
  </script>

  <script async
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB38rOcYSnjrdPynqMR6i0vpP8ZYi1Z2W4&callback=initMap">
  </script>
</body>
</html>
